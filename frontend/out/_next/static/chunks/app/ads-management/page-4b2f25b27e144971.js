(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{6249:function(t,e,n){Promise.resolve().then(n.bind(n,2838))},2838:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var a=n(7437),r=n(2265),s=n(7138),i=n(8030);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),c=(0,i.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var o=n(2757);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,i.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),u=(0,i.Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var p=n(6264);function m(){let[t,e]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[m,x]=(0,r.useState)("last_7d"),[g,h]=(0,r.useState)(void 0),[f,y]=(0,r.useState)({}),v=(0,r.useRef)(0),[b,_]=(0,r.useState)(()=>{try{return localStorage.getItem("ptos_store")||"irrakids"}catch(t){return"irrakids"}}),[j,w]=(0,r.useState)(()=>{try{return localStorage.getItem("ptos_ad_account")||""}catch(t){return""}}),[N,S]=(0,r.useState)({}),[k,Z]=(0,r.useState)(()=>{try{return JSON.parse(localStorage.getItem("ptos_notes")||"{}")}catch(t){return{}}}),[C,D]=(0,r.useState)({}),[I,M]=(0,r.useState)({}),[z,O]=(0,r.useState)({}),[R,A]=(0,r.useState)({}),[P,F]=(0,r.useState)({}),[J,L]=(0,r.useState)({}),[T,$]=(0,r.useState)({}),[H,E]=(0,r.useState)("spend"),[U,q]=(0,r.useState)("desc");function X(t){let e=new Date,n=t=>{let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(a)},a=new Date(e),r=new Date(e);switch(t){case"today":r.setHours(0,0,0,0);break;case"yesterday":{let t=new Date(e);t.setDate(t.getDate()-1),t.setHours(0,0,0,0);let a=new Date(t);return a.setHours(23,59,59,999),{start:n(t),end:n(a)}}case"last_14d":r.setDate(r.getDate()-14);break;case"this_month":return{start:n(new Date(e.getFullYear(),e.getMonth(),1)),end:n(a)};case"last_30d":r.setDate(r.getDate()-30);break;default:r.setDate(r.getDate()-7)}return r.setHours(0,0,0,0),{start:n(r),end:n(a)}}async function Y(t){i(!0),h(void 0);try{let n=t||m,a=await (0,p._X)(n,j||void 0);(null==a?void 0:a.error)?(h(String(a.error)),e([])):e((null==a?void 0:a.data)||[]),y({}),S({}),O({}),A({}),F({}),L({}),$({});let r=++v.current;setTimeout(async()=>{var t,e,s,i;if(r!==v.current)return;let l=(null==a?void 0:a.data)||[],c=l.map(t=>(t.name||"").trim()).filter(t=>/^\d+$/.test(t));if(!c.length)return;try{let t=await (0,p.$8)({ids:c,store:b});S((null==t?void 0:t.data)||{})}catch(t){S({})}let{start:o,end:d}=X(n);for(let e of c){if(r!==v.current)break;try{let n=await (0,p._R)({names:[e],start:o,end:d,include_closed:!0}),a=null!==(t=((null==n?void 0:n.data)||{})[e])&&void 0!==t?t:0;y(t=>({...t,[e]:a}))}catch(t){y(t=>({...t,[e]:0}))}await new Promise(t=>setTimeout(t,50))}for(let t of l){if(r!==v.current)break;let n=t.campaign_id||t.name||"";try{let t=C[n];if(!t||!t.id||!/^\d+$/.test(t.id))continue;if("product"===t.kind){let a=await (0,p._R)({names:[t.id],start:o,end:d,include_closed:!0}),r=null!==(e=((null==a?void 0:a.data)||{})[t.id])&&void 0!==e?e:0;O(t=>({...t,[String(n)]:r}))}else{let e=await (0,p.ew)({collection_id:t.id,start:o,end:d,store:b,include_closed:!0,aggregate:"sum_product_orders"}),a=Number(null!==(i=null===(s=(null==e?void 0:e.data)||{})||void 0===s?void 0:s.count)&&void 0!==i?i:0);O(t=>({...t,[String(n)]:a}))}}catch(t){O(t=>({...t,[String(n)]:0}))}await new Promise(t=>setTimeout(t,50))}},0)}catch(t){h(String((null==t?void 0:t.message)||t)),e([])}finally{i(!1)}}async function Q(t,e){$(e=>({...e,[String(t)]:!0}));try{let{data:n}=await (0,p.fh)({collection_id:e,store:b}),a=(n||{}).product_ids||[];F(e=>({...e,[String(t)]:a}));let{start:r,end:s}=X(m);try{let e=await (0,p._R)({names:a,start:r,end:s,include_closed:!0}),n=(null==e?void 0:e.data)||{};L(e=>({...e,[String(t)]:n}));let i=a.reduce((t,e)=>{var a;return t+(Number(null!==(a=n[e])&&void 0!==a?a:0)||0)},0);O(e=>({...e,[String(t)]:i}))}catch(n){let e={};for(let t of a)e[t]=0;L(n=>({...n,[String(t)]:e})),O(e=>({...e,[String(t)]:0}))}}finally{$(e=>({...e,[String(t)]:!1}))}}function V(t){return(t.name||"").trim()}function B(t){let e=V(t),n=t.campaign_id||t.name||"";if(C[n]&&null!=z[String(n)])return z[String(n)];if(!/^\d+$/.test(e))return null;let a=f[e];return"number"==typeof a?a:null}function W(t){switch(H){case"campaign":return(t.name||"").toLowerCase();case"spend":return t.spend||0;case"purchases":return t.purchases||0;case"cpp":return null==t.cpp?null:Number(t.cpp);case"ctr":return null==t.ctr?null:Number(t.ctr);case"add_to_cart":return t.add_to_cart||0;case"shopify_orders":return B(t);case"true_cpp":return function(t){let e=B(t);return null==e||e<=0?null:(t.spend||0)/e}(t);case"inventory":return function(t){let e=V(t);if(!/^\d+$/.test(e))return null;let n=N[e];return n&&"number"==typeof n.total_available?n.total_available:null}(t);case"zero_variant":return function(t){let e=V(t);if(!/^\d+$/.test(e))return null;let n=N[e];return n&&"number"==typeof n.zero_variants?n.zero_variants:null}(t);default:return null}}function K(t,e){let n=W(t),a=W(e),r=null==n,s=null==a;if(r&&s)return 0;if(r&&!s)return 1;if(!r&&s)return -1;let i=0;return i="string"==typeof n||"string"==typeof a?String(n).localeCompare(String(a)):(Number(n)||0)-(Number(a)||0),"asc"===U?i:-i}(0,r.useEffect)(()=>{Y(m)},[]),(0,r.useEffect)(()=>{(async()=>{try{let t=await (0,p.zO)(b),e=(null==t?void 0:t.data)||{},n={};for(let t of Object.keys(e||{})){let a=e[t];a&&("product"===a.kind||"collection"===a.kind)&&a.id&&(n[t]={kind:a.kind,id:a.id})}D(n)}catch(t){}})()},[b]);let G=(0,r.useMemo)(()=>{let e=(t||[]).slice();try{e.sort(K)}catch(t){}return e},[t,H,U,f,N]);function tt(t){H===t?q(t=>"asc"===t?"desc":"asc"):(E(t),q("desc"))}function te(){return"asc"===U?(0,a.jsx)(l,{className:"w-3.5 h-3.5"}):(0,a.jsx)(c,{className:"w-3.5 h-3.5"})}return(0,a.jsxs)("div",{className:"min-h-screen w-full bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-sky-50 via-white to-indigo-50 text-slate-800",children:[(0,a.jsxs)("header",{className:"h-16 px-4 md:px-6 flex items-center justify-between border-b bg-white/70 backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h1",{className:"font-semibold text-lg",children:"Ads management"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{value:b,onChange:t=>{let e=t.target.value;_(e);try{localStorage.setItem("ptos_store",e)}catch(t){}},className:"rounded-xl border px-2 py-1 text-sm bg-white",children:[(0,a.jsx)("option",{value:"irrakids",children:"irrakids"}),(0,a.jsx)("option",{value:"irranova",children:"irranova"})]}),(0,a.jsx)("input",{value:j,onChange:t=>{let e=t.target.value.trim();w(e);try{localStorage.setItem("ptos_ad_account",e)}catch(t){}},placeholder:"Ad account (numeric)",className:"rounded-xl border px-2 py-1 text-sm bg-white w-40"}),(0,a.jsxs)("select",{value:m,onChange:t=>{x(t.target.value),Y(t.target.value)},className:"rounded-xl border px-2 py-1 text-sm bg-white",children:[(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,a.jsx)("option",{value:"last_7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"last_14d",children:"Last 14 days"}),(0,a.jsx)("option",{value:"this_month",children:"This month"}),(0,a.jsx)("option",{value:"last_30d",children:"Last 30 days"})]}),(0,a.jsxs)("button",{onClick:()=>Y(),className:"rounded-xl font-semibold inline-flex items-center gap-2 px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm disabled:opacity-60",disabled:n,children:[(0,a.jsx)(d,{className:"w-4 h-4"})," Refresh"]}),(0,a.jsx)(s.default,{href:"/",className:"rounded-xl font-semibold inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white",children:"Home"})]})]}),(0,a.jsxs)("div",{className:"p-4 md:p-6",children:[g&&(0,a.jsx)("div",{className:"mb-3 text-sm text-red-600",children:g}),(0,a.jsx)("div",{className:"overflow-x-auto bg-white border rounded-none",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-slate-50/90 backdrop-blur supports-backdrop-blur:bg-slate-50/60 border-b shadow-sm",children:(0,a.jsxs)("tr",{className:"text-left",children:[(0,a.jsx)("th",{className:"px-3 py-2 font-semibold",children:"Product"}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold",children:(0,a.jsxs)("button",{onClick:()=>tt("campaign"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"Campaign"}),"campaign"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("spend"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"Spend"}),"spend"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("purchases"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"Purchases"}),"purchases"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("cpp"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"Cost / Purchase"}),"cpp"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("ctr"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"CTR"}),"ctr"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("add_to_cart"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"Add to cart"}),"add_to_cart"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-emerald-700",children:(0,a.jsxs)("button",{onClick:()=>tt("shopify_orders"),className:"inline-flex items-center gap-1 hover:text-emerald-800",children:[(0,a.jsx)("span",{children:"Shopify Orders"}),"shopify_orders"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-emerald-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("true_cpp"),className:"inline-flex items-center gap-1 hover:text-slate-900",children:[(0,a.jsx)("span",{children:"True CPP"}),"true_cpp"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-slate-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-indigo-700 text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("inventory"),className:"inline-flex items-center gap-1 hover:text-indigo-800",children:[(0,a.jsx)("span",{children:"Inventory"}),"inventory"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-indigo-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold text-rose-700 text-right",children:(0,a.jsxs)("button",{onClick:()=>tt("zero_variant"),className:"inline-flex items-center gap-1 hover:text-rose-800",children:[(0,a.jsx)("span",{children:"Zero-variant"}),"zero_variant"===H?(0,a.jsx)(te,{}):(0,a.jsx)(u,{className:"w-3.5 h-3.5 text-rose-400"})]})}),(0,a.jsx)("th",{className:"px-3 py-2 font-semibold",children:"Notes"})]})}),(0,a.jsxs)("tbody",{children:[n&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:12,className:"px-3 py-6 text-center text-slate-500",children:"Loading…"})}),!n&&0===t.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:12,className:"px-3 py-6 text-center text-slate-500",children:"No active campaigns."})}),!n&&G.map(t=>{let e=null!=t.cpp?"$".concat(t.cpp.toFixed(2)):"—",n=null!=t.ctr?"".concat((1*t.ctr).toFixed(2),"%"):"—",s=(t.name||"").trim(),i=/^\d+$/.test(s),l=B(t),c=null!=l&&l>0?(t.spend||0)/l:null,o=null!=c?"$".concat(c.toFixed(2)):"—",d=i?N[s]:void 0,u=d?d.total_available:null,x=d?d.zero_variants:null,g=d?d.image:null,h=t.campaign_id||t.name||String(Math.random());return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("tr",{className:"border-b last:border-b-0 ".concat(null==c?"":c<2?"bg-emerald-50":c<3?"bg-amber-50":"bg-rose-50"," ").concat(null==c?"border-l-2 border-l-transparent":c<2?"border-l-4 border-l-emerald-400":c<3?"border-l-4 border-l-amber-400":"border-l-4 border-l-rose-400"),children:[(0,a.jsx)("td",{className:"px-3 py-2",children:i?g?(0,a.jsx)("img",{src:g,alt:"product",className:"w-20 h-20 rounded object-cover border"}):(0,a.jsx)("span",{className:"inline-block w-20 h-20 rounded bg-slate-100 border animate-pulse"}):(0,a.jsx)("span",{className:"inline-block w-20 h-20 rounded bg-slate-50 border"})}),(0,a.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap",children:[(0,a.jsx)("div",{children:t.name||"-"}),(0,a.jsx)("div",{className:"mt-1 flex items-center gap-1",children:(()=>{var e,n;let r=t.campaign_id||t.name||"",s=I[r]||C[r]||{kind:"product",id:""};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("select",{value:s.kind,onChange:t=>M(e=>({...e,[r]:{...e[r]||{id:"",kind:"product"},kind:t.target.value}})),className:"border rounded px-1 py-0.5 text-xs bg-white",children:[(0,a.jsx)("option",{value:"product",children:"Product"}),(0,a.jsx)("option",{value:"collection",children:"Collection"})]}),(0,a.jsx)("input",{value:s.id||"",onChange:t=>M(e=>({...e,[r]:{...e[r]||{kind:s.kind},id:t.target.value.replace(/[^0-9]/g,"")}})),placeholder:"ID",className:"w-24 border rounded px-2 py-0.5 text-xs bg-white"}),(0,a.jsx)("button",{onClick:async()=>{var t,e,n,a,i;let l={kind:(null===(t=I[r])||void 0===t?void 0:t.kind)||s.kind,id:((null===(e=I[r])||void 0===e?void 0:e.id)||s.id||"").trim()};D(t=>({...t,[r]:l}));try{try{await (0,p.sQ)({campaign_key:String(r),kind:l.kind,id:l.id,store:b})}catch(t){}let{start:t,end:e}=X(m);if("product"===l.kind){let a=await (0,p._R)({names:[l.id],start:t,end:e,include_closed:!0}),s=null!==(n=((null==a?void 0:a.data)||{})[l.id])&&void 0!==n?n:0;O(t=>({...t,[String(r)]:s}))}else{let n=await (0,p.ew)({collection_id:l.id,start:t,end:e,store:b,include_closed:!0,aggregate:"sum_product_orders"}),s=Number(null!==(i=null===(a=(null==n?void 0:n.data)||{})||void 0===a?void 0:a.count)&&void 0!==i?i:0);O(t=>({...t,[String(r)]:s})),await Q(r,l.id)}}catch(t){O(t=>({...t,[String(r)]:0}))}},className:"px-2 py-0.5 rounded bg-slate-200 hover:bg-slate-300 text-xs",children:"Save"}),C[r]&&(null===(e=C[r])||void 0===e?void 0:e.kind)==="collection"&&(null===(n=C[r])||void 0===n?void 0:n.id)&&(0,a.jsx)("button",{onClick:async()=>{let t=!R[String(r)];if(A(e=>({...e,[String(r)]:t})),t){let t=String((C[r]||{}).id||"");t&&await Q(r,t)}},className:"px-2 py-0.5 rounded bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs",children:R[String(r)]?"Hide products":"Show products"}),C[r]&&(0,a.jsx)("button",{onClick:()=>{D(t=>{let e={...t};delete e[r];try{localStorage.setItem("ptos_campaign_ids",JSON.stringify(e))}catch(t){}return e}),M(t=>{let e={...t};return delete e[r],e}),O(t=>{let e={...t};return delete e[String(r)],e}),A(t=>{let e={...t};return delete e[String(r)],e}),F(t=>{let e={...t};return delete e[String(r)],e}),L(t=>{let e={...t};return delete e[String(r)],e})},className:"px-2 py-0.5 rounded bg-rose-100 hover:bg-rose-200 text-rose-700 text-xs",children:"Clear"})]})})()})]}),(0,a.jsxs)("td",{className:"px-3 py-2 text-right",children:["$",(t.spend||0).toFixed(2)]}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:t.purchases||0}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:e}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:n}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:t.add_to_cart||0}),(0,a.jsx)("td",{className:"px-3 py-2",children:null==l?(0,a.jsx)("span",{className:"text-slate-400",children:"—"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:l})}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:null==l?(0,a.jsx)("span",{className:"inline-block h-4 w-12 bg-slate-100 rounded animate-pulse"}):o}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:i?null==u?(0,a.jsx)("span",{className:"inline-block h-4 w-10 bg-indigo-50 rounded animate-pulse"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-700",children:u}):(0,a.jsx)("span",{className:"text-slate-400",children:"—"})}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:i?null==x?(0,a.jsx)("span",{className:"inline-block h-4 w-10 bg-rose-50 rounded animate-pulse"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold ".concat(x>0?"bg-rose-100 text-rose-700":"bg-emerald-100 text-emerald-700"),children:x}):(0,a.jsx)("span",{className:"text-slate-400",children:"—"})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("input",{value:k[h]||"",onChange:t=>{let e=t.target.value;Z(t=>{let n={...t,[h]:e};try{localStorage.setItem("ptos_notes",JSON.stringify(n))}catch(t){}return n})},placeholder:"Notes",className:"w-44 rounded-md border px-2 py-1 text-sm bg-white"})})]}),(()=>{let e=t.campaign_id||t.name||"",n=C[e];if(!(n&&"collection"===n.kind&&R[String(e)]))return null;let r=P[String(e)]||[],s=J[String(e)]||{},i=!!T[String(e)];return(0,a.jsx)("tr",{className:"border-b last:border-b-0",children:(0,a.jsx)("td",{className:"px-3 py-2 bg-slate-50",colSpan:12,children:i?(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Loading products…"}):(0,a.jsx)("div",{className:"text-xs",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[r.map(t=>{var e;return(0,a.jsxs)("div",{className:"flex items-center justify-between border rounded px-2 py-1 bg-white",children:[(0,a.jsx)("span",{className:"font-mono",children:t}),(0,a.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full bg-emerald-100 text-emerald-700 font-semibold",children:null!==(e=s[t])&&void 0!==e?e:"—"})]},t)}),0===r.length&&(0,a.jsx)("div",{className:"text-slate-500",children:"No products in this collection."})]})})})})})()]},t.campaign_id||t.name)})]})]})})]})]})}},6264:function(t,e,n){"use strict";n.d(e,{$8:function(){return V},DO:function(){return o},HW:function(){return L},HX:function(){return v},JA:function(){return J},KQ:function(){return N},Ks:function(){return T},LJ:function(){return C},ME:function(){return u},Nm:function(){return A},PN:function(){return h},Q:function(){return $},Rd:function(){return p},Sv:function(){return k},V0:function(){return X},VI:function(){return w},WM:function(){return y},XD:function(){return d},_R:function(){return Q},_X:function(){return Y},aW:function(){return q},dP:function(){return b},e1:function(){return F},eg:function(){return j},ew:function(){return B},fE:function(){return m},fh:function(){return D},hw:function(){return f},jZ:function(){return R},kY:function(){return H},l9:function(){return x},n4:function(){return c},oB:function(){return z},rU:function(){return U},sF:function(){return O},sP:function(){return P},sQ:function(){return M},sj:function(){return _},sm:function(){return S},th:function(){return Z},vz:function(){return E},xY:function(){return i},yD:function(){return l},yp:function(){return g},zO:function(){return I}});var a=n(8472);let r=n(357).env.NEXT_PUBLIC_API_BASE_URL||"";function s(){try{return localStorage.getItem("ptos_store")||void 0}catch(t){return}}async function i(t){let e=new FormData;for(let n of(e.append("audience",t.audience),e.append("benefits",JSON.stringify(t.benefits)),e.append("pain_points",JSON.stringify(t.pain_points)),null!=t.base_price&&e.append("base_price",String(t.base_price)),t.title&&e.append("title",t.title),Array.isArray(t.sizes)&&e.append("sizes",JSON.stringify(t.sizes)),Array.isArray(t.colors)&&e.append("colors",JSON.stringify(t.colors)),t.targeting&&e.append("targeting","string"==typeof t.targeting?t.targeting:JSON.stringify(t.targeting)),"boolean"==typeof t.advantage_plus&&e.append("advantage_plus",String(t.advantage_plus)),"number"==typeof t.adset_budget&&e.append("adset_budget",String(t.adset_budget)),t.model&&e.append("model",t.model),t.angles_prompt&&e.append("angles_prompt",t.angles_prompt),t.title_desc_prompt&&e.append("title_desc_prompt",t.title_desc_prompt),t.landing_copy_prompt&&e.append("landing_copy_prompt",t.landing_copy_prompt),t.images||[]))e.append("images",n);let{data:n}=await a.Z.post("".concat(r,"/api/tests"),e,{headers:{"Content-Type":"multipart/form-data"}});return n}async function l(t){let{data:e}=await a.Z.get("".concat(r,"/api/tests/").concat(t));return e}async function c(t){let{data:e}=await a.Z.get("".concat(r,"/api/tests/").concat(t,"?slim=1"));return e}async function o(t){var e,n;let i={...t,settings:{...t.settings||{},store:null!==(n=null==t?void 0:null===(e=t.settings)||void 0===e?void 0:e.store)&&void 0!==n?n:s()}},{data:l}=await a.Z.post("".concat(r,"/api/flows/draft"),i);return l}async function d(t,e){var n,i;let l={...e,settings:{...e.settings||{},store:null!==(i=null==e?void 0:null===(n=e.settings)||void 0===n?void 0:n.store)&&void 0!==i?i:s()}},{data:c}=await a.Z.put("".concat(r,"/api/flows/draft/").concat(t),l);return c}async function u(t){let{data:e}=await a.Z.get("".concat(r,"/api/flows/").concat(t));return e}async function p(t,e){let n=[];"number"==typeof t&&n.push("limit=".concat(t));let i=e||s();i&&n.push("store=".concat(encodeURIComponent(i)));let l=n.length?"?".concat(n.join("&")):"",{data:c}=await a.Z.get("".concat(r,"/api/flows").concat(l));return c}async function m(t){let{data:e}=await a.Z.delete("".concat(r,"/api/flows/").concat(t));return e}async function x(){let{data:t}=await a.Z.get("".concat(r,"/api/meta/audiences"));return t}async function g(t){let{data:e}=await a.Z.post("".concat(r,"/api/flows/ads/launch"),t);return e}async function h(t){let{data:e}=await a.Z.post("".concat(r,"/api/llm/angles"),t);return e}async function f(t){let{data:e}=await a.Z.post("".concat(r,"/api/llm/title_desc"),t);return e}async function y(t){let{data:e}=await a.Z.post("".concat(r,"/api/llm/landing_copy"),t);return e}async function v(t){let{data:e}=await a.Z.post("".concat(r,"/api/llm/analyze_landing_page"),t);return e}async function b(t){let{data:e}=await a.Z.post("".concat(r,"/api/meta/draft_image_campaign"),t);return e}async function _(t){let{data:e}=await a.Z.post("".concat(r,"/api/meta/draft_carousel_campaign"),t);return e}async function j(t){let e=new FormData;for(let n of t||[])e.append("files",n);let{data:n}=await a.Z.post("".concat(r,"/api/uploads"),e,{headers:{"Content-Type":"multipart/form-data"}});return n}async function w(t){let{data:e}=await a.Z.post("".concat(r,"/api/shopify/upload_images"),{...t,store:s()});return e}async function N(t){let{data:e}=await a.Z.post("".concat(r,"/api/shopify/product_create_from_title_desc"),{...t,store:s()});return e}async function S(t){let{data:e}=await a.Z.post("".concat(r,"/api/shopify/update_title"),{...t,store:s()});return e}async function k(t){var e,n;let{data:i}=await a.Z.post("".concat(r,"/api/shopify/create_page_from_copy"),{...t,store:s()});return{page_url:null!==(n=null!==(e=null==i?void 0:i.page_url)&&void 0!==e?e:null==i?void 0:i.url)&&void 0!==n?n:void 0}}async function Z(t){let{data:e}=await a.Z.post("".concat(r,"/api/shopify/configure_variants"),{...t,store:s()});return e}async function C(t){let e=new FormData;e.append("product_gid",t.product_gid),t.title&&e.append("title",t.title),t.description&&e.append("description",t.description),t.landing_copy&&e.append("landing_copy",JSON.stringify(t.landing_copy));let n=s();for(let a of(n&&e.append("store",n),t.files||[]))e.append("files",a);let{data:i}=await a.Z.post("".concat(r,"/api/shopify/upload_files"),e,{headers:{"Content-Type":"multipart/form-data"}});return i}async function D(t){var e;let n={...t,store:null!==(e=t.store)&&void 0!==e?e:s()},{data:i}=await a.Z.post("".concat(r,"/api/shopify/collection_products"),n);return i}async function I(t){let e=[],n=null!=t?t:s();n&&e.push("store=".concat(encodeURIComponent(n)));let i=e.length?"?".concat(e.join("&")):"",{data:l}=await a.Z.get("".concat(r,"/api/campaign_mappings").concat(i));return l}async function M(t){var e;let n={...t,store:null!==(e=t.store)&&void 0!==e?e:s()},{data:i}=await a.Z.post("".concat(r,"/api/campaign_mappings"),n);return i}async function z(t){let{data:e}=await a.Z.post("".concat(r,"/api/gemini/ad_image"),t);return e}async function O(t){let{data:e}=await a.Z.post("".concat(r,"/api/gemini/feature_benefit_set"),t);return e}async function R(t){let{data:e}=await a.Z.post("".concat(r,"/api/agent/execute"),t);return e}async function A(t){let{data:e}=await a.Z.post("".concat(r,"/api/translate"),t);return e}async function P(t){let{data:e}=await a.Z.get("".concat(r,"/api/agents").concat("number"==typeof t?"?limit=".concat(t):""));return e}async function F(t){let{data:e}=await a.Z.get("".concat(r,"/api/agents/").concat(t));return e}async function J(t,e){let{data:n}=await a.Z.put("".concat(r,"/api/agents/").concat(t),e);return n}async function L(t,e){let{data:n}=await a.Z.get("".concat(r,"/api/agents/").concat(t,"/runs").concat("number"==typeof e?"?limit=".concat(e):""));return n}async function T(t,e){let{data:n}=await a.Z.post("".concat(r,"/api/agents/").concat(t,"/runs"),e);return n}async function $(t,e,n){let{data:s}=await a.Z.put("".concat(r,"/api/agents/").concat(t,"/runs/").concat(e),n);return s}async function H(t,e){let{data:n}=await a.Z.get("".concat(r,"/api/agents/").concat(t,"/runs/").concat(e));return n}async function E(t){let{data:e}=await a.Z.post("".concat(r,"/api/llm/product_from_image"),t);return e}async function U(t){let{data:e}=await a.Z.post("".concat(r,"/api/gemini/variant_set"),t);return e}async function q(){let{data:t}=await a.Z.get("".concat(r,"/api/prompts"));return t}async function X(t){let{data:e}=await a.Z.post("".concat(r,"/api/prompts"),t);return e}async function Y(t,e){let n=[];t&&n.push("date_preset=".concat(encodeURIComponent(t))),e&&n.push("ad_account=".concat(encodeURIComponent(e)));let s=n.length?"?".concat(n.join("&")):"",{data:i}=await a.Z.get("".concat(r,"/api/meta/campaigns").concat(s));return i}async function Q(t){var e,n;let i={...t,store:null!==(e=t.store)&&void 0!==e?e:s(),include_closed:null===(n=t.include_closed)||void 0===n||n,date_field:t.date_field},{data:l}=await a.Z.post("".concat(r,"/api/shopify/orders_count_by_title"),i);return l}async function V(t){var e;let n={...t,store:null!==(e=t.store)&&void 0!==e?e:s()},{data:i}=await a.Z.post("".concat(r,"/api/shopify/products_brief"),n);return i}async function B(t){var e,n;let i={...t,store:null!==(e=t.store)&&void 0!==e?e:s(),include_closed:null===(n=t.include_closed)||void 0===n||n,aggregate:t.aggregate,date_field:t.date_field},{data:l}=await a.Z.post("".concat(r,"/api/shopify/orders_count_by_collection"),i);return l}},2757:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]])},7138:function(t,e,n){"use strict";n.d(e,{default:function(){return r.a}});var a=n(231),r=n.n(a)}},function(t){t.O(0,[472,231,971,23,744],function(){return t(t.s=6249)}),_N_E=t.O()}]);