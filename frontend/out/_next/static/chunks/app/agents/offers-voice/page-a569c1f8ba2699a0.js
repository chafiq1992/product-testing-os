(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{2828:function(e,t,n){Promise.resolve().then(n.bind(n,9474))},5406:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(7437),r=n(2265),s=r.forwardRef(function({control:e,...t},n){let s=r.useRef(null);return r.useLayoutEffect(()=>{let t=s.current;if(!t)return;if(customElements.get("openai-chatkit")){t.setOptions(e.options);return}let n=!0;return customElements.whenDefined("openai-chatkit").then(()=>{n&&t.setOptions(e.options)}),()=>{n=!1}},[e.options]),(0,a.jsx)("openai-chatkit",{ref:t=>{if(s.current=t,e.setInstance(t),"function"==typeof n?n(t):n&&(n.current=t),!s.current)return;let a={"chatkit.error":"onError","chatkit.response.end":"onResponseEnd","chatkit.response.start":"onResponseStart","chatkit.log":"onLog","chatkit.thread.change":"onThreadChange","chatkit.thread.load.start":"onThreadLoadStart","chatkit.thread.load.end":"onThreadLoadEnd"};for(let t of Object.keys(a))s.current.addEventListener(t,n=>{let r=e.handlers[a[t]];"function"==typeof r&&r(n.detail)})},...t})});function i(e){return null!==e&&"object"==typeof e&&[null,Object.prototype].includes(Object.getPrototypeOf(e))||Array.isArray(e)}var o=Object.freeze(["focusComposer","setThreadId","sendUserMessage","setComposerValue","fetchUpdates","sendCustomAction"]),c=n(357);function l(){let e=c.env.NEXT_PUBLIC_CHATKIT_WORKFLOW_ID||c.env.NEXT_PUBLIC_CHATKIT_WORKFLOW||void 0,t=c.env.NEXT_PUBLIC_CHATKIT_WORKFLOW_VERSION||void 0,n=(0,r.useMemo)(()=>{try{var e,t;let n="chatkit_device_id",a=localStorage.getItem(n);if(a)return a;let r=(null===(t=crypto)||void 0===t?void 0:null===(e=t.randomUUID)||void 0===e?void 0:e.call(t))||Math.random().toString(36).slice(2);return localStorage.setItem(n,r),r}catch(e){return"anon"}},[]),{control:l}=function(e){let t=r.useRef(null),n=function(e){let t=r.useRef(e);t.current=e;let n=r.useRef(null);return n.current&&function e(t,n,a=new WeakMap){if(Object.is(t,n))return!0;if("function"==typeof t&&"function"==typeof n)return typeof t==typeof n;if(!i(t)||!i(n))return!1;let r=a.get(t);if(r&&r===n)return!0;if(a.set(t,n),Array.isArray(t)||Array.isArray(n)){if(!Array.isArray(t)||!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r],a))return!1;return!0}let s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(let r=0;r<s.length;r++){let i=s[r];if(!Object.prototype.hasOwnProperty.call(n,i)||!e(t[i],n[i],a))return!1}return!0}(n.current.snapshot,e)||(n.current={snapshot:e,shaped:function(e){let t=[],n=(e,t)=>t.reduce((e,t)=>null==e?e:e[t],e),a=(t,a)=>(...r)=>{let s=n(e.current,t),i=s?.[a];if("function"==typeof i)return i.apply(s,r)},r=e=>{if("function"==typeof e){let e=t[t.length-1];return a(t.slice(0,-1),e)}if(Array.isArray(e)){let n=t.length,a=Array(e.length);for(let s=0;s<e.length;s++)t[n]=s,a[s]=r(e[s]);return t.length=n,a}if(e&&"object"==typeof e){let n=t.length,a={};for(let s of Object.keys(e))t[n]=s,a[s]=r(e[s]);return t.length=n,a}return e};return r(e.current)}(t)}),n.current.shaped}(e),a=r.useMemo(()=>o.reduce((e,n)=>(e[n]=(...e)=>{if(!t.current){console.warn("ChatKit element is not mounted");return}return t.current[n](...e)},e),{}),[]),s=r.useCallback(e=>{t.current=e},[]),c=r.useMemo(()=>{let e={},t={};for(let[a,r]of Object.entries(n))/^on[A-Z]/.test(a)&&"onClientTool"!==a?t[a]=r:e[a]=r;return{setInstance:s,options:e,handlers:t}},[n,s]);return r.useMemo(()=>({...a,control:c,ref:t}),[a,c])}({api:{getClientSecret:async function(a){let r=c.env.NEXT_PUBLIC_API_BASE_URL||"",s=await fetch("".concat(r,"/api/chatkit/session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n,workflow_id:e,version:t})});if(!s.ok)throw console.error("ChatKit session fetch failed",s.status),Error("ChatKit session HTTP ".concat(s.status));let i=await s.json();if(!(null==i?void 0:i.client_secret)){let e=i&&(i.error||i.details)?JSON.stringify(i):"missing client_secret";throw console.error("ChatKit missing client_secret",e),Error("ChatKit session error: ".concat(e))}return null==i?void 0:i.client_secret}},theme:{colorScheme:"light",radius:"pill",density:"normal",typography:{baseSize:16,fontFamily:'"OpenAI Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif',fontFamilyMono:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace',fontSources:[{family:"OpenAI Sans",src:"https://cdn.openai.com/common/fonts/openai-sans/v2/OpenAISans-Regular.woff2",weight:400,style:"normal",display:"swap"}]}},composer:{attachments:{enabled:!0,maxCount:5,maxSize:10485760},tools:[{id:"search_docs",label:"Search docs",shortLabel:"Docs",placeholderOverride:"Search documentation",icon:"book-open",pinned:!1}]},startScreen:{greeting:"",prompts:[{icon:"circle-question",label:"What is ChatKit?",prompt:"What is ChatKit?"}]}});return(0,a.jsx)("div",{className:"w-full flex items-center justify-center relative z-50 pointer-events-auto isolate",children:(0,a.jsx)(s,{control:l,className:"h-[640px] w-full max-w-[480px] bg-white"})})}},9474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var a=n(7437),r=n(2265),s=n(495),i=n(6013),o=n(3146),c=n(4693),l=n(7776),d=n(8184),u=n(2140),p=n(2468),f=n(3907),m=n(7164),h=n(5406),x=n(5273),g=n(6264);let v="#004AAD",y="#E8F0FF",b=async e=>{await navigator.clipboard.writeText(e),l.Am.success("Copied to clipboard")},_=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");function w(e){var t,n;return{source:null!==(t=null==e?void 0:e.source)&&void 0!==t?t:{},brand:null!==(n=null==e?void 0:e.brand)&&void 0!==n?n:{},items:Array.isArray(null==e?void 0:e.items)?e.items.map(e=>{var t,n,a,r,s,i,o,c;return{offer_id:String(null!==(r=e.offer_id)&&void 0!==r?r:""),label:String(null!==(s=e.label)&&void 0!==s?s:""),type:String(null!==(i=e.type)&&void 0!==i?i:""),ad_copies:Array.isArray(e.ad_copies)?e.ad_copies.map(e=>{var t,n,a,r;return{stopper:String(null!==(t=e.stopper)&&void 0!==t?t:""),benefit_line:String(null!==(n=e.benefit_line)&&void 0!==n?n:""),cta:String(null!==(a=e.cta)&&void 0!==a?a:""),full_text:String(null!==(r=e.full_text)&&void 0!==r?r:"")}}):[],headlines:Array.isArray(e.headlines)?e.headlines.map(e=>String(e)):[],image_prompt:{prompt:String(null!==(o=null===(t=e.image_prompt)||void 0===t?void 0:t.prompt)&&void 0!==o?o:""),overlay_text:Array.isArray(null===(n=e.image_prompt)||void 0===n?void 0:n.overlay_text)?e.image_prompt.overlay_text.map(e=>String(e)):[],banner_note:String(null!==(c=null===(a=e.image_prompt)||void 0===a?void 0:a.banner_note)&&void 0!==c?c:"")}}}):[]}}function j(e){var t,n;return{source:null!==(t=null==e?void 0:e.source)&&void 0!==t?t:{},brand:null!==(n=null==e?void 0:e.brand)&&void 0!==n?n:{},items:Array.isArray(null==e?void 0:e.items)?e.items.map(e=>{var t,n;return{offer_id:String(null!==(t=e.offer_id)&&void 0!==t?t:""),label:"string"==typeof e.label?e.label:"",type:"string"==typeof e.type?e.type:"",duration_seconds:Number(null!==(n=e.duration_seconds)&&void 0!==n?n:0),aspect_ratio:"string"==typeof e.aspect_ratio?e.aspect_ratio:"9:16",storyboard:Array.isArray(e.storyboard)?e.storyboard.map(e=>{var t,n,a,r,s,i,o,c,l,d;return{t_start:Number(null!==(t=e.t_start)&&void 0!==t?t:0),t_end:Number(null!==(n=e.t_end)&&void 0!==n?n:0),voiceover:String(null!==(a=e.voiceover)&&void 0!==a?a:""),visual_type:String(null!==(r=e.visual_type)&&void 0!==r?r:""),shot_instructions:String(null!==(s=e.shot_instructions)&&void 0!==s?s:""),images_to_show:Array.isArray(e.images_to_show)?e.images_to_show.map(e=>String(e)):[],on_screen_text:String(null!==(i=e.on_screen_text)&&void 0!==i?i:""),motion:String(null!==(o=e.motion)&&void 0!==o?o:""),transition:String(null!==(c=e.transition)&&void 0!==c?c:""),sfx:String(null!==(l=e.sfx)&&void 0!==l?l:""),music_cue:String(null!==(d=e.music_cue)&&void 0!==d?d:"")}}):[],broll_checklist:Array.isArray(e.broll_checklist)?e.broll_checklist.map(e=>String(e)):[],image_pack:Array.isArray(e.image_pack)?e.image_pack.map(e=>{var t,n;return{slot_or_desc:String(null!==(t=e.slot_or_desc)&&void 0!==t?t:""),notes:String(null!==(n=e.notes)&&void 0!==n?n:"")}}):[],captions:Array.isArray(e.captions)?e.captions.map(e=>{var t,n,a;return{t_start:Number(null!==(t=e.t_start)&&void 0!==t?t:0),t_end:Number(null!==(n=e.t_end)&&void 0!==n?n:0),text:String(null!==(a=e.text)&&void 0!==a?a:"")}}):[],music_sfx:e.music_sfx,export_settings:e.export_settings,compliance:e.compliance}}):[]}}function N(e){let t=_(e.slot||"slot"),n=_(e.alt||""),a=_(e.ratio||"4:3"),r=_(e.recommended||"");return'\n  <figure class="img-slot" data-slot="'.concat(t,'" data-ratio="').concat(a,'">\n    <div class="img-slot__ph" style="aspect-ratio:').concat(a.replace(":"," / "),'">\n      <img src="').concat("data:image/gif;base64,R0lGODlhAQABAAAAACw=",'" alt="').concat(n,'" title="Click to replace with a Shopify image" data-slot="').concat(t,'" draggable="false" style="width:100%;height:100%;object-fit:cover;display:block;cursor:pointer"/>\n      <div class="img-slot__label">Click to choose from Shopify Files \xb7 ').concat(a).concat(r?" \xb7 ".concat(r):"","</div>\n    </div>\n    ").concat(n?'<figcaption class="img-slot__caption">'.concat(n,"</figcaption>"):"","\n  </figure>")}function k(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{preview:a=!1}=n,r="\n  <style>\n    :root{--brand:".concat(v,";--brand-soft:").concat(y,";--ink:#0f172a;--muted:#64748b}\n    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Emoji,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,sans-serif;color:var(--ink)}\n    .offers-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}\n    .offer-card{border:1px solid #e2e8f0;border-radius:12px;padding:12px;background:#fff}\n    .offer-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}\n    .offer-type{font-size:12px;color:var(--muted)}\n    .overlay-tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}\n    .tag{font-size:12px;border:1px solid #e2e8f0;border-radius:999px;padding:4px 8px;background:var(--brand-soft);color:var(--brand)}\n    .hlist{margin:8px 0 0 0;padding:0;list-style:none}\n    .hlist li{display:flex;gap:8px;align-items:center;margin:6px 0;padding:8px;border:1px dashed #e2e8f0;border-radius:10px}\n    .copies{margin:8px 0 0 0;padding:0;list-style:none}\n    .copies li{display:flex;gap:8px;align-items:flex-start;margin:6px 0;padding:8px;border:1px solid #eef2f7;border-radius:10px;background:#fafcff}\n    .copy-btn{border:1px solid #e2e8f0;border-radius:10px;background:#fff;padding:6px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}\n    .copy-btn.copied{background:var(--brand-soft);border-color:var(--brand);}\n    .copy-btn svg{width:16px;height:16px}\n    .img-slot{margin:8px 0}\n    .img-slot__ph{border:1px dashed #cbd5e1;border-radius:12px;background:#f8fafc;display:flex;align-items:center;justify-content:center;position:relative}\n    .img-slot__label{position:absolute;bottom:8px;left:8px;right:8px;font-size:12px;color:#475569;background:#ffffffcc;padding:4px 8px;border-radius:8px}\n    .img-slot__caption{font-size:12px;color:#64748b;margin-top:6px}\n  </style>"),s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>',i=(e.items||[]).map(e=>{var t,n,r;let i=N({slot:"offer_".concat(e.offer_id,"_image"),alt:e.label||e.type,ratio:"4:3",recommended:(null===(t=e.image_prompt)||void 0===t?void 0:t.banner_note)||""}),o=(null===(n=e.headlines)||void 0===n?void 0:n.length)?'<ul class="hlist">'.concat(e.headlines.map(e=>{let t=_(e);return'<li><button class="copy-btn" type="button" '.concat(a?'data-copy="'.concat(t,'"'):"",' aria-label="Copy headline">').concat(s,"</button><span>").concat(t,"</span></li>")}).join(""),"</ul>"):"",c=Array.isArray(e.ad_copies)&&e.ad_copies.length?'<ul class="copies">'.concat(e.ad_copies.map(e=>{let t=_(e.full_text||"".concat(e.stopper," ").concat(e.benefit_line," ").concat(e.cta).trim());return'<li><button class="copy-btn" type="button" '.concat(a?'data-copy="'.concat(t,'"'):"",' aria-label="Copy ad copy">').concat(s,"</button><div><div><strong>").concat(_(e.stopper),"</strong></div><div>").concat(_(e.benefit_line),"</div><em>").concat(_(e.cta),'</em><div style="margin-top:4px;color:#475569;font-size:12px">Full: ').concat(t,"</div></div></li>")}).join(""),"</ul>"):"",l=((null===(r=e.image_prompt)||void 0===r?void 0:r.overlay_text)||[]).map(e=>'<span class="tag">'.concat(_(e),"</span>")).join("");return'<article class="offer-card">\n        <div class="offer-head">\n          <div><strong>'.concat(_(e.label||"Offer ".concat(e.offer_id)),'</strong></div>\n          <div class="offer-type">').concat(_(e.type),"</div>\n        </div>\n        ").concat(i,"\n        ").concat(l?'<div class="overlay-tags">'.concat(l,"</div>"):"","\n        ").concat(o,"\n        ").concat(c,"\n      </article>")}).join(""),o='<section class="offers"><h2 style="margin:0 0 8px 0">'.concat(_((null===(t=e.brand)||void 0===t?void 0:t.name)||"Offers"),'</h2><div class="offers-grid">').concat(i,"</div></section>");return a?'<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">'.concat(r,"</head><body>").concat(o).concat("\n  <script>\n    document.addEventListener('click', function(e){\n      var btn = e.target.closest && e.target.closest('[data-copy]');\n      if(!btn) return;\n      var text = btn.getAttribute('data-copy') || '';\n      navigator.clipboard.writeText(text).then(function(){\n        btn.classList.add('copied');\n        setTimeout(function(){ btn.classList.remove('copied'); }, 800);\n      });\n    });\n  </script>","</body></html>"):"".concat(r).concat(o)}function S(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let n="\n  <style>\n    :root{--brand:".concat(v,";--soft:").concat(y,";--ink:#0f172a;--muted:#64748b}\n    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Emoji,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,sans-serif;color:var(--ink)}\n    .grid{display:grid;gap:16px}\n    .item{border:1px solid #e2e8f0;border-radius:12px;overflow:hidden;background:#fff}\n    .head{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:var(--soft)}\n    .head .label{font-weight:600}\n    .row{display:grid;grid-template-columns:120px 1fr 1fr;gap:12px;align-items:start;padding:12px 14px;border-top:1px solid #eef2f7}\n    .time{font-variant-numeric:tabular-nums;color:#0f172a;font-weight:600}\n    .vo{font-size:15px;line-height:1.5}\n    .ins{font-size:13px;color:var(--muted)}\n    .chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}\n    .chip{font-size:12px;border:1px solid #e2e8f0;border-radius:999px;padding:2px 8px;background:#fff}\n    .copy-btn{border:1px solid #e2e8f0;border-radius:10px;background:#fff;padding:4px 6px;cursor:pointer;display:inline-flex;align-items:center;gap:6px;margin-right:8px}\n    .copy-btn.copied{background:var(--soft);border-color:var(--brand)}\n    .bar{height:4px;background:linear-gradient(90deg,var(--brand),#7aa8ff);border-radius:999px;margin-top:4px}\n    .img-slot{margin-top:8px}\n  </style>"),a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>',r=(e.items||[]).map(e=>{let t=Math.max(...(e.storyboard||[]).map(e=>Number(e.t_end||0)),0),n=(e.storyboard||[]).map(n=>{let r=Number(n.t_start||0).toFixed(1),s=Number(n.t_end||0).toFixed(1),i=Math.max(0,Number(n.t_end||0)-Number(n.t_start||0)),o=(n.images_to_show||[]).map(t=>N({slot:"".concat(e.offer_id,"_").concat(t),alt:t,ratio:"4:3",recommended:"Frame/asset placeholder"})).join(""),c=_(n.voiceover||""),l=_(n.shot_instructions||"");return'<div class="row">\n        <div>\n          <div class="time">'.concat(r,"s → ").concat(s,'s</div>\n          <div class="bar" style="width:').concat(t>0?Math.max(6,i/t*100):0,'%"></div>\n        </div>\n        <div class="vo">\n          <button class="copy-btn" data-copy="').concat(c,'">').concat(a,"<span>Copy VO</span></button>\n          ").concat(c||'<em style="color:#64748b">(no voiceover text)</em>',"\n          ").concat(n.on_screen_text?'<div class="chips"><span class="chip">Text: '.concat(_(n.on_screen_text),"</span></div>"):"",'\n        </div>\n        <div class="ins">\n          <button class="copy-btn" data-copy="').concat(l,'">').concat(a,"<span>Copy Instr.</span></button>\n          ").concat(l||'<em style="color:#94a3b8">(no instructions)</em>',"\n          ").concat(n.visual_type?'<div class="chips"><span class="chip">'.concat(_(n.visual_type),"</span>").concat(n.motion?'<span class="chip">'.concat(_(n.motion),"</span>"):"").concat(n.transition?'<span class="chip">'.concat(_(n.transition),"</span>"):"").concat(n.sfx?'<span class="chip">SFX: '.concat(_(n.sfx),"</span>"):"").concat(n.music_cue?'<span class="chip">Music: '.concat(_(n.music_cue),"</span>"):"","</div>"):"","\n          ").concat(o,"\n        </div>\n      </div>")}).join(""),r=(e.broll_checklist||[]).map(e=>'<span class="chip">'.concat(_(e),"</span>")).join("");return'<section class="item">\n      <div class="head"><div class="label">'.concat(_(e.label||e.offer_id),'</div><div class="meta">').concat(_(e.aspect_ratio||"9:16")," • ").concat(t?"".concat(Math.floor(t/60),":").concat(Math.round(t%60).toString().padStart(2,"0")):"0:00",'</div></div>\n      <div class="grid">').concat(n,"</div>\n      ").concat(r?'<div style="padding:8px 14px;border-top:1px solid #eef2f7"><div class="chips">'.concat(r,"</div></div>"):"","\n    </section>")}).join("");return'<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">'.concat(n,'</head><body><h2 style="margin:0 0 12px 0">').concat(_((null===(t=e.brand)||void 0===t?void 0:t.name)||"Voiceover"),"</h2>").concat(r).concat("\n  <script>\n    document.addEventListener('click', function(e){\n      var btn = e.target.closest && e.target.closest('[data-copy]');\n      if(!btn) return;\n      var text = btn.getAttribute('data-copy') || '';\n      navigator.clipboard.writeText(text).then(function(){\n        btn.classList.add('copied');\n        setTimeout(function(){ btn.classList.remove('copied'); }, 800);\n      });\n    });\n  </script>","</body></html>")}function A(){let[e,t]=(0,r.useState)("offers"),[n,_]=(0,r.useState)("en"),[N,A]=(0,r.useState)(JSON.stringify({source:{from_agent:"kids_marketing_lp_response_en",offer_count:6},brand:{name:"IRRAKIDS"},items:[]},null,2)),[I,C]=(0,r.useState)(!0),[O,Z]=(0,r.useState)(""),[L,E]=(0,r.useState)(""),[M,D]=(0,r.useState)(null),[T,z]=(0,r.useState)({}),[R,P]=(0,r.useState)({}),[F,J]=(0,r.useState)({}),[U,V]=(0,r.useState)({}),[K,B]=(0,r.useState)(JSON.stringify({source:{from_agent:"ADS_PACK_V1",offer_count:0},brand:{name:"IRRAKIDS"},items:[]},null,2)),[H,W]=(0,r.useState)(!0),[G,Y]=(0,r.useState)(""),[Q,X]=(0,r.useState)(""),[q,$]=(0,r.useState)(null),[ee,et]=(0,r.useState)({}),[en,ea]=(0,r.useState)({}),[er,es]=(0,r.useState)({});function ei(e,t){if("ar"===t||"ary"===t)try{return e.replace("<body>",'<body dir="rtl" style="text-align:right">')}catch(e){}return e}async function eo(e,t){let{items:n,index:a}=function(e){var t;let n=[],a=[];return(null===(t=e.brand)||void 0===t?void 0:t.name)&&(n.push(String(e.brand.name)),a.push({kind:"brand",itemIndex:-1})),(e.items||[]).forEach((e,t)=>{var r;n.push(String(e.label||"")),a.push({kind:"label",itemIndex:t}),n.push(String(e.type||"")),a.push({kind:"type",itemIndex:t}),(e.headlines||[]).forEach((e,r)=>{n.push(String(e||"")),a.push({kind:"headline",itemIndex:t,subIndex:r})}),(e.ad_copies||[]).forEach((e,r)=>{n.push(String(e.stopper||"")),a.push({kind:"stopper",itemIndex:t,subIndex:r}),n.push(String(e.benefit_line||"")),a.push({kind:"benefit",itemIndex:t,subIndex:r}),n.push(String(e.cta||"")),a.push({kind:"cta",itemIndex:t,subIndex:r}),n.push(String(e.full_text||"")),a.push({kind:"full",itemIndex:t,subIndex:r})}),((null===(r=e.image_prompt)||void 0===r?void 0:r.overlay_text)||[]).forEach((e,r)=>{n.push(String(e||"")),a.push({kind:"overlay",itemIndex:t,subIndex:r})})}),{items:n,index:a}}(t);if(0===n.length)return t;J(t=>({...t,[e]:!0})),V(t=>({...t,[e]:void 0}));try{let r=await (0,g.Nm)({texts:n,target:e,locale:"ary"===e?"MA":void 0,domain:"ads"}),s=Array.isArray(null==r?void 0:r.translations)?r.translations:[];if(s.length!==n.length)throw Error("count mismatch");return function(e,t,n){let a={source:e.source,brand:{...e.brand||{}},items:e.items.map(e=>{var t;return{...e,ad_copies:(e.ad_copies||[]).map(e=>({...e})),headlines:[...e.headlines||[]],image_prompt:{...e.image_prompt||{},overlay_text:[...(null===(t=e.image_prompt)||void 0===t?void 0:t.overlay_text)||[]]}}})},r=0;for(let e of n){var s;let n=null!==(s=t[r++])&&void 0!==s?s:"";"brand"===e.kind&&a.brand&&(a.brand.name=n),"label"===e.kind&&(a.items[e.itemIndex].label=n),"type"===e.kind&&(a.items[e.itemIndex].type=n),"headline"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].headlines[e.subIndex]=n),"overlay"===e.kind&&null!=e.subIndex&&a.items[e.itemIndex].image_prompt&&(a.items[e.itemIndex].image_prompt.overlay_text[e.subIndex]=n),"stopper"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].ad_copies[e.subIndex].stopper=n),"benefit"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].ad_copies[e.subIndex].benefit_line=n),"cta"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].ad_copies[e.subIndex].cta=n),"full"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].ad_copies[e.subIndex].full_text=n)}return a}(t,s,a)}catch(n){return V(t=>({...t,[e]:(null==n?void 0:n.message)||"translate failed"})),t}finally{J(t=>({...t,[e]:!1}))}}async function ec(e,t){let{items:n,index:a}=function(e){var t;let n=[],a=[];return(null===(t=e.brand)||void 0===t?void 0:t.name)&&(n.push(String(e.brand.name)),a.push({kind:"brand",itemIndex:-1})),(e.items||[]).forEach((e,t)=>{(e.storyboard||[]).forEach((e,r)=>{n.push(String(e.voiceover||"")),a.push({kind:"vo",itemIndex:t,subIndex:r}),n.push(String(e.shot_instructions||"")),a.push({kind:"ins",itemIndex:t,subIndex:r}),n.push(String(e.on_screen_text||"")),a.push({kind:"text",itemIndex:t,subIndex:r})}),(e.broll_checklist||[]).forEach((e,r)=>{n.push(String(e||"")),a.push({kind:"check",itemIndex:t,subIndex:r})})}),{items:n,index:a}}(t);if(0===n.length)return t;ea(t=>({...t,[e]:!0})),es(t=>({...t,[e]:void 0}));try{let r=await (0,g.Nm)({texts:n,target:e,locale:"ary"===e?"MA":void 0,domain:"ads"}),s=Array.isArray(null==r?void 0:r.translations)?r.translations:[];if(s.length!==n.length)throw Error("count mismatch");return function(e,t,n){let a={source:e.source,brand:{...e.brand||{}},items:e.items.map(e=>({...e,storyboard:(e.storyboard||[]).map(e=>({...e})),broll_checklist:[...e.broll_checklist||[]]}))},r=0;for(let e of n){var s;let n=null!==(s=t[r++])&&void 0!==s?s:"";"brand"===e.kind&&a.brand&&(a.brand.name=n),"vo"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].storyboard[e.subIndex].voiceover=n),"ins"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].storyboard[e.subIndex].shot_instructions=n),"text"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].storyboard[e.subIndex].on_screen_text=n),"check"===e.kind&&null!=e.subIndex&&(a.items[e.itemIndex].broll_checklist[e.subIndex]=n)}return a}(t,s,a)}catch(n){return es(t=>({...t,[e]:(null==n?void 0:n.message)||"translate failed"})),t}finally{ea(t=>({...t,[e]:!1}))}}let el=async()=>{try{let e=JSON.parse(N),t=w(e);D(t);let n=k(t,{preview:!0}),a=k(t,{preview:!1});z({en:ei(n,"en")}),P({en:a}),Z(ei(n,"en")),E(a),await Promise.allSettled([(async()=>{let e=await eo("ar",t),n=k(e,{preview:!0}),a=k(e,{preview:!1});z(e=>({...e,ar:ei(n,"ar")})),P(e=>({...e,ar:a}))})(),(async()=>{let e=await eo("fr",t),n=k(e,{preview:!0}),a=k(e,{preview:!1});z(e=>({...e,fr:ei(n,"fr")})),P(e=>({...e,fr:a}))})(),(async()=>{let e=await eo("ary",t),n=k(e,{preview:!0}),a=k(e,{preview:!1});z(e=>({...e,ary:ei(n,"ary")})),P(e=>({...e,ary:a}))})()]),l.Am.success("Offers HTML generated")}catch(e){Z(""),l.Am.error("Invalid Offers JSON: ".concat(e.message))}},ed=async()=>{try{let e=JSON.parse(K),t=j(e);$(t);let n=S(t,{preview:!0});et({en:ei(n,"en")}),Y(ei(n,"en")),X(n),await Promise.allSettled([(async()=>{let e=await ec("ar",t),n=S(e,{preview:!0});et(e=>({...e,ar:ei(n,"ar")}))})(),(async()=>{let e=await ec("fr",t),n=S(e,{preview:!0});et(e=>({...e,fr:ei(n,"fr")}))})(),(async()=>{let e=await ec("ary",t),n=S(e,{preview:!0});et(e=>({...e,ary:ei(n,"ary")}))})()]),l.Am.success("Voiceover preview generated")}catch(e){Y(""),l.Am.error("Invalid Voice JSON: ".concat(e.message))}},eu=()=>{let t="offers"===e?L:Q;if(!t)return l.Am.error("Generate HTML first");let n=new Blob([t],{type:"text/html"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download="".concat(e,"-")+Date.now()+".html",r.click(),URL.revokeObjectURL(a)};return(0,a.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-b from-white to-slate-50 text-slate-800",children:[(0,a.jsx)("div",{className:"sticky top-0 z-40 border-b bg-white/80 backdrop-blur",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-9 w-9 rounded-xl",style:{background:v}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Irrakids Creative"}),(0,a.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"Offers + Voiceover Preview"})]}),(0,a.jsx)(c.C,{className:"ml-3",style:{backgroundColor:y,color:v},children:"v5.0"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c.C,{style:{backgroundColor:y,color:v},children:"offers"===e?"Offers":"Voiceover"})})]})}),(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 pt-4",children:(0,a.jsxs)("div",{className:"inline-flex rounded-xl border bg-white overflow-hidden",children:[(0,a.jsx)("button",{className:"px-4 py-2 text-sm ".concat("offers"===e?"bg-[var(--brand-soft)] font-semibold":""),style:{"--brand-soft":y},onClick:()=>t("offers"),children:"Offers"}),(0,a.jsx)("button",{className:"px-4 py-2 text-sm ".concat("voice"===e?"bg-[var(--brand-soft)] font-semibold":""),style:{"--brand-soft":y},onClick:()=>t("voice"),children:"Voiceover"})]})}),"offers"===e?(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsxs)(i.Ol,{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{className:"text-base",children:"Offers JSON (Agent output)"}),(0,a.jsx)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>C(e=>!e),children:I?"Expand":"Minimize"})]}),(0,a.jsxs)(i.aY,{className:I?"hidden":"",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>A(JSON.stringify({source:{from_agent:"kids_marketing_lp_response_en",offer_count:6},brand:{name:"IRRAKIDS"},items:[{offer_id:"O1",label:"Free Beanie with Set",type:"gift_with_purchase",ad_copies:[{stopper:"Gift Inside",benefit_line:"Free warm beanie when you get the cozy 3‑piece set—24–48h city delivery + Cash on Delivery.",cta:"Shop Now",full_text:"Gift Inside Free warm beanie when you get the cozy 3‑piece set—24–48h city delivery + Cash on Delivery. Shop Now \uD83C\uDF81\uD83E\uDDD2\uD83E\uDDE3\uD83D\uDE9A"}],headlines:["Free Beanie With 3‑Piece Set"],image_prompt:{prompt:"Toddler boy (2–5 years) ...",overlay_text:["Free Beanie Today","Warm Set + Gift"],banner_note:"Top-left ribbon"}}]},null,2)),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Load sample"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>b(N),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),(0,a.jsx)(o.g,{value:N,onChange:e=>A(e.target.value),className:"min-h-[140px] rounded-xl font-mono"})]})]}),(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-base",children:"Quick Tests"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"flex gap-2 mb-2 flex-wrap",children:[(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{let e=w(JSON.parse(N)),t=Array.isArray(e.items)&&e.items.length>=1;l.Am[t?"success":"error"](t?"L7: offers schema ok":"L7 failed")}catch(e){l.Am.error("L7 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L7"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{let e=k(w(JSON.parse(N))),t=e.includes("offers-grid")&&e.includes("offer-card");l.Am[t?"success":"error"](t?"L8: offers HTML renders":"L8 failed")}catch(e){l.Am.error("L8 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L8"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{let e=k(w(JSON.parse(N))),t=/\\[A-Za-z]/.test(e);l.Am[t?"error":"success"](t?"L10: stray backslashes found":"L10: no stray backslashes in HTML")}catch(e){l.Am.error("L10 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L10"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{let e=k(w(JSON.parse(N)),{preview:!0}).includes("data-copy=");l.Am[e?"success":"error"](e?"L11: copy buttons wired (preview)":"L11 failed")}catch(e){l.Am.error("L11 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L11"]})]})})]})]}),(0,a.jsx)("div",{className:"lg:col-span-7",children:(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{className:"text-base",children:"Preview"}),(0,a.jsx)(x.mQ,{value:n,onValueChange:e=>_(e),children:(0,a.jsxs)(x.dr,{className:"rounded-xl",children:[(0,a.jsx)(x.SP,{value:"en",className:"rounded-xl",children:"English"}),(0,a.jsx)(x.SP,{value:"ar",className:"rounded-xl",children:"العربية"}),(0,a.jsx)(x.SP,{value:"fr",className:"rounded-xl",children:"Fran\xe7ais"}),(0,a.jsx)(x.SP,{value:"ary",className:"rounded-xl",children:"الدارجة"})]})})]})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"rounded-xl border overflow-hidden",children:O?(0,a.jsx)("iframe",{title:"Offers Preview",srcDoc:T[n]||T.en||O,style:{width:"100%",height:640,border:"0"}}):(0,a.jsxs)("div",{className:"p-6 text-sm text-slate-500",children:["Paste offers JSON and click ",(0,a.jsx)("strong",{children:"Generate Offers HTML"})," to see the live preview."]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(s.z,{className:"rounded-xl",onClick:el,children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Generate Offers HTML"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:eu,children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Download HTML"]})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-slate-500 flex items-center gap-2",children:["Translations:",(0,a.jsxs)("span",{className:F.ar?"text-sky-600":"",children:["AR ",T.ar?"ready":F.ar?"…":U.ar?"error":"–"]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsxs)("span",{className:F.fr?"text-sky-600":"",children:["FR ",T.fr?"ready":F.fr?"…":U.fr?"error":"–"]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsxs)("span",{className:F.ary?"text-sky-600":"",children:["Darija ",T.ary?"ready":F.ary?"…":U.ary?"error":"–"]})]})]})]})})]}):(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsxs)(i.Ol,{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{className:"text-base",children:"Voiceover JSON (Agent output)"}),(0,a.jsx)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>W(e=>!e),children:H?"Expand":"Minimize"})]}),(0,a.jsxs)(i.aY,{className:H?"hidden":"",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>B(JSON.stringify({source:{from_agent:"ADS_PACK_V1",offer_count:1},brand:{name:"IRRAKIDS"},items:[{offer_id:"OF1-GWP-SOCKS",label:"Free Socks Pack with Sneakers",duration_seconds:15,aspect_ratio:"9:16",storyboard:[{t_start:0,t_end:2.5,voiceover:"Gift inside! Free socks with any pair of IRRAKIDS sneakers.",visual_type:"lifestyle_recording",shot_instructions:"Exterior school steps. Kid swings feet; parent reveals socks bundle.",images_to_show:["hero_main","gift_socks_bundle"],on_screen_text:"Free Socks Today",motion:"Push-in",transition:"Cut",sfx:"Whoosh",music_cue:"Upbeat in"},{t_start:2.5,t_end:6.5,voiceover:"Breathable, cushioned, and easy to clean for all‑day play.",visual_type:"product_recording",shot_instructions:"Macro mesh + insole press, wipe-clean demo.",images_to_show:["macro_mesh_breathable","insole_press","wipe_clean_demo"],on_screen_text:"Comfy. Breathable.",motion:"Macro sweep",transition:"Match",sfx:"Cloth swipe",music_cue:"Beat continues"},{t_start:10.5,t_end:15,voiceover:"Order now with Cash on Delivery. Fast 24–48 hour city delivery!",visual_type:"lifestyle_recording",shot_instructions:"Doorstep handoff; kid runs off.",images_to_show:["delivery_handoff","try_on_run"],on_screen_text:"COD + 24–48h",motion:"Follow cam",transition:"End card",sfx:"Door chime",music_cue:"Button"}]}]},null,2)),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Load sample"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>b(K),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),(0,a.jsx)(o.g,{value:K,onChange:e=>B(e.target.value),className:"min-h-[140px] rounded-xl font-mono"})]})]}),(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-base",children:"Quick Tests (Voiceover)"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"flex gap-2 mb-2 flex-wrap",children:[(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{let e=j(JSON.parse(K)),t=Array.isArray(e.items)&&e.items.length>0&&Array.isArray(e.items[0].storyboard);l.Am[t?"success":"error"](t?"L12: voice schema ok":"L12 failed")}catch(e){l.Am.error("L12 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L12"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{let e=S(j(JSON.parse(K))).includes('class="row"');l.Am[e?"success":"error"](e?"L13: storyboard rows render":"L13 failed")}catch(e){l.Am.error("L13 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L13"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:()=>{try{var e,t;let n=j(JSON.parse(K)),a=(null===(t=n.items)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.storyboard)||[],r=Math.max(...a.map(e=>Number(e.t_end||0)),0),s=r>0;l.Am[s?"success":"error"](s?"L14: total duration ".concat(r,"s"):"L14 failed")}catch(e){l.Am.error("L14 error: ".concat(e.message))}},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"L14"]})]})})]})]}),(0,a.jsx)("div",{className:"lg:col-span-7",children:(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{className:"text-base",children:"Voiceover Preview"}),(0,a.jsx)(x.mQ,{value:n,onValueChange:e=>_(e),children:(0,a.jsxs)(x.dr,{className:"rounded-xl",children:[(0,a.jsx)(x.SP,{value:"en",className:"rounded-xl",children:"English"}),(0,a.jsx)(x.SP,{value:"ar",className:"rounded-xl",children:"العربية"}),(0,a.jsx)(x.SP,{value:"fr",className:"rounded-xl",children:"Fran\xe7ais"}),(0,a.jsx)(x.SP,{value:"ary",className:"rounded-xl",children:"الدارجة"})]})})]})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"rounded-xl border overflow-hidden",children:G?(0,a.jsx)("iframe",{title:"Voiceover Preview",srcDoc:ee[n]||ee.en||G,style:{width:"100%",height:640,border:"0"}}):(0,a.jsxs)("div",{className:"p-6 text-sm text-slate-500",children:["Paste voiceover JSON and click ",(0,a.jsx)("strong",{children:"Generate Voiceover"})," to see an easy-to-read VO + Instructions board."]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(s.z,{className:"rounded-xl",onClick:ed,children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Generate Voiceover"]}),(0,a.jsxs)(s.z,{variant:"outline",className:"rounded-xl",onClick:eu,children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Download HTML"]})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-slate-500 flex items-center gap-2",children:["Translations:",(0,a.jsxs)("span",{className:en.ar?"text-sky-600":"",children:["AR ",ee.ar?"ready":en.ar?"…":er.ar?"error":"–"]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsxs)("span",{className:en.fr?"text-sky-600":"",children:["FR ",ee.fr?"ready":en.fr?"…":er.fr?"error":"–"]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsxs)("span",{className:en.ary?"text-sky-600":"",children:["Darija ",ee.ary?"ready":en.ary?"…":er.ary?"error":"–"]})]})]})]})})]}),(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 pb-10",children:(0,a.jsxs)(i.Zb,{className:"rounded-2xl border-slate-200 shadow-sm",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-base",children:"Agent Builder Chat"})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h.default,{})})]})}),(0,a.jsx)("div",{className:"mt-10 border-t",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-8 flex flex-col md:flex-row items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Built for fast promos \xb7 Offers + Voiceover workflow"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)(c.C,{style:{backgroundColor:y,color:v},children:"offers"===e?"Offers":"Voiceover"}),(0,a.jsx)(c.C,{variant:"secondary",children:"Preview"})]})]})})]})}},4693:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var a=n(7437);function r(e){let{variant:t="default",className:n="",...r}=e;return(0,a.jsx)("span",{...r,className:["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",{default:"bg-slate-900 text-white",secondary:"bg-slate-100 text-slate-900",outline:"border border-slate-200 text-slate-700"}[t],n].join(" ")})}n(2265)},495:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var a=n(7437);function r(e){let{variant:t="default",size:n="md",className:r="",...s}=e;return(0,a.jsx)("button",{...s,className:["inline-flex items-center justify-center font-medium transition focus:outline-none",{default:"bg-slate-900 text-white hover:bg-slate-800",outline:"border border-slate-200 bg-white text-slate-900 hover:bg-slate-50",ghost:"text-slate-700 hover:bg-slate-100"}[t],{sm:"h-8 px-2 rounded-md text-sm",md:"h-10 px-4 rounded-lg"}[n],r].join(" ")})}n(2265)},6013:function(e,t,n){"use strict";n.d(t,{Ol:function(){return s},Zb:function(){return r},aY:function(){return o},ll:function(){return i}});var a=n(7437);function r(e){let{className:t="",...n}=e;return(0,a.jsx)("div",{...n,className:["border bg-white",t].join(" ")})}function s(e){let{className:t="",...n}=e;return(0,a.jsx)("div",{...n,className:["border-b p-4",t].join(" ")})}function i(e){let{className:t="",...n}=e;return(0,a.jsx)("div",{...n,className:["font-semibold",t].join(" ")})}function o(e){let{className:t="",...n}=e;return(0,a.jsx)("div",{...n,className:["p-4",t].join(" ")})}n(2265)},5273:function(e,t,n){"use strict";n.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return i},nU:function(){return l}});var a=n(7437),r=n(2265);let s=r.createContext(null);function i(e){let{value:t,onValueChange:n,className:i="",children:o}=e,[c,l]=r.useState(t);r.useEffect(()=>{l(t)},[t]);let d=r.useCallback(e=>{l(e),n(e)},[n]);return(0,a.jsx)("div",{className:i,children:(0,a.jsx)(s.Provider,{value:{value:c,setValue:d},children:o})})}function o(e){let{className:t="",children:n}=e;return(0,a.jsx)("div",{className:["inline-flex gap-2 bg-slate-100 p-1",t].join(" "),children:n})}function c(e){let{value:t,className:n="",children:i}=e,o=r.useContext(s),c=(null==o?void 0:o.value)===t;return(0,a.jsx)("button",{onClick:()=>null==o?void 0:o.setValue(t),className:["px-3 py-1.5 text-sm rounded-md transition",c?"bg-white shadow border border-slate-200":"hover:bg-white/60",n].join(" "),children:i})}function l(e){let{value:t,className:n="",children:i}=e,o=r.useContext(s);return(null==o?void 0:o.value)!==t?null:(0,a.jsx)("div",{className:n,children:i})}},3146:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var a=n(7437);function r(e){let{className:t="",...n}=e;return(0,a.jsx)("textarea",{...n,className:["w-full border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 min-h-[100px]","rounded-lg",t].join(" ")})}n(2265)},6264:function(e,t,n){"use strict";n.d(t,{$8:function(){return Y},DO:function(){return l},HW:function(){return P},HX:function(){return y},JA:function(){return R},KQ:function(){return N},Ks:function(){return F},LJ:function(){return I},ME:function(){return u},Nm:function(){return D},PN:function(){return x},Q:function(){return J},Rd:function(){return p},Sv:function(){return S},V0:function(){return H},VI:function(){return j},WM:function(){return v},XD:function(){return d},_R:function(){return G},_X:function(){return W},aW:function(){return B},dP:function(){return b},e1:function(){return z},eg:function(){return w},ew:function(){return Q},fE:function(){return f},fh:function(){return C},hw:function(){return g},jZ:function(){return M},kY:function(){return U},l9:function(){return m},n4:function(){return c},oB:function(){return L},rU:function(){return K},sF:function(){return E},sP:function(){return T},sQ:function(){return Z},sj:function(){return _},sm:function(){return k},th:function(){return A},vz:function(){return V},xY:function(){return i},yD:function(){return o},yp:function(){return h},zO:function(){return O}});var a=n(8472);let r=n(357).env.NEXT_PUBLIC_API_BASE_URL||"";function s(){try{return localStorage.getItem("ptos_store")||void 0}catch(e){return}}async function i(e){let t=new FormData;for(let n of(t.append("audience",e.audience),t.append("benefits",JSON.stringify(e.benefits)),t.append("pain_points",JSON.stringify(e.pain_points)),null!=e.base_price&&t.append("base_price",String(e.base_price)),e.title&&t.append("title",e.title),Array.isArray(e.sizes)&&t.append("sizes",JSON.stringify(e.sizes)),Array.isArray(e.colors)&&t.append("colors",JSON.stringify(e.colors)),e.targeting&&t.append("targeting","string"==typeof e.targeting?e.targeting:JSON.stringify(e.targeting)),"boolean"==typeof e.advantage_plus&&t.append("advantage_plus",String(e.advantage_plus)),"number"==typeof e.adset_budget&&t.append("adset_budget",String(e.adset_budget)),e.model&&t.append("model",e.model),e.angles_prompt&&t.append("angles_prompt",e.angles_prompt),e.title_desc_prompt&&t.append("title_desc_prompt",e.title_desc_prompt),e.landing_copy_prompt&&t.append("landing_copy_prompt",e.landing_copy_prompt),e.images||[]))t.append("images",n);let{data:n}=await a.Z.post("".concat(r,"/api/tests"),t,{headers:{"Content-Type":"multipart/form-data"}});return n}async function o(e){let{data:t}=await a.Z.get("".concat(r,"/api/tests/").concat(e));return t}async function c(e){let{data:t}=await a.Z.get("".concat(r,"/api/tests/").concat(e,"?slim=1"));return t}async function l(e){var t,n;let i={...e,settings:{...e.settings||{},store:null!==(n=null==e?void 0:null===(t=e.settings)||void 0===t?void 0:t.store)&&void 0!==n?n:s()}},{data:o}=await a.Z.post("".concat(r,"/api/flows/draft"),i);return o}async function d(e,t){var n,i;let o={...t,settings:{...t.settings||{},store:null!==(i=null==t?void 0:null===(n=t.settings)||void 0===n?void 0:n.store)&&void 0!==i?i:s()}},{data:c}=await a.Z.put("".concat(r,"/api/flows/draft/").concat(e),o);return c}async function u(e){let{data:t}=await a.Z.get("".concat(r,"/api/flows/").concat(e));return t}async function p(e,t){let n=[];"number"==typeof e&&n.push("limit=".concat(e));let i=t||s();i&&n.push("store=".concat(encodeURIComponent(i)));let o=n.length?"?".concat(n.join("&")):"",{data:c}=await a.Z.get("".concat(r,"/api/flows").concat(o));return c}async function f(e){let{data:t}=await a.Z.delete("".concat(r,"/api/flows/").concat(e));return t}async function m(){let{data:e}=await a.Z.get("".concat(r,"/api/meta/audiences"));return e}async function h(e){let{data:t}=await a.Z.post("".concat(r,"/api/flows/ads/launch"),e);return t}async function x(e){let{data:t}=await a.Z.post("".concat(r,"/api/llm/angles"),e);return t}async function g(e){let{data:t}=await a.Z.post("".concat(r,"/api/llm/title_desc"),e);return t}async function v(e){let{data:t}=await a.Z.post("".concat(r,"/api/llm/landing_copy"),e);return t}async function y(e){let{data:t}=await a.Z.post("".concat(r,"/api/llm/analyze_landing_page"),e);return t}async function b(e){let{data:t}=await a.Z.post("".concat(r,"/api/meta/draft_image_campaign"),e);return t}async function _(e){let{data:t}=await a.Z.post("".concat(r,"/api/meta/draft_carousel_campaign"),e);return t}async function w(e){let t=new FormData;for(let n of e||[])t.append("files",n);let{data:n}=await a.Z.post("".concat(r,"/api/uploads"),t,{headers:{"Content-Type":"multipart/form-data"}});return n}async function j(e){let{data:t}=await a.Z.post("".concat(r,"/api/shopify/upload_images"),{...e,store:s()});return t}async function N(e){let{data:t}=await a.Z.post("".concat(r,"/api/shopify/product_create_from_title_desc"),{...e,store:s()});return t}async function k(e){let{data:t}=await a.Z.post("".concat(r,"/api/shopify/update_title"),{...e,store:s()});return t}async function S(e){var t,n;let{data:i}=await a.Z.post("".concat(r,"/api/shopify/create_page_from_copy"),{...e,store:s()});return{page_url:null!==(n=null!==(t=null==i?void 0:i.page_url)&&void 0!==t?t:null==i?void 0:i.url)&&void 0!==n?n:void 0}}async function A(e){let{data:t}=await a.Z.post("".concat(r,"/api/shopify/configure_variants"),{...e,store:s()});return t}async function I(e){let t=new FormData;t.append("product_gid",e.product_gid),e.title&&t.append("title",e.title),e.description&&t.append("description",e.description),e.landing_copy&&t.append("landing_copy",JSON.stringify(e.landing_copy));let n=s();for(let a of(n&&t.append("store",n),e.files||[]))t.append("files",a);let{data:i}=await a.Z.post("".concat(r,"/api/shopify/upload_files"),t,{headers:{"Content-Type":"multipart/form-data"}});return i}async function C(e){var t;let n={...e,store:null!==(t=e.store)&&void 0!==t?t:s()},{data:i}=await a.Z.post("".concat(r,"/api/shopify/collection_products"),n);return i}async function O(e){let t=[],n=null!=e?e:s();n&&t.push("store=".concat(encodeURIComponent(n)));let i=t.length?"?".concat(t.join("&")):"",{data:o}=await a.Z.get("".concat(r,"/api/campaign_mappings").concat(i));return o}async function Z(e){var t;let n={...e,store:null!==(t=e.store)&&void 0!==t?t:s()},{data:i}=await a.Z.post("".concat(r,"/api/campaign_mappings"),n);return i}async function L(e){let{data:t}=await a.Z.post("".concat(r,"/api/gemini/ad_image"),e);return t}async function E(e){let{data:t}=await a.Z.post("".concat(r,"/api/gemini/feature_benefit_set"),e);return t}async function M(e){let{data:t}=await a.Z.post("".concat(r,"/api/agent/execute"),e);return t}async function D(e){let{data:t}=await a.Z.post("".concat(r,"/api/translate"),e);return t}async function T(e){let{data:t}=await a.Z.get("".concat(r,"/api/agents").concat("number"==typeof e?"?limit=".concat(e):""));return t}async function z(e){let{data:t}=await a.Z.get("".concat(r,"/api/agents/").concat(e));return t}async function R(e,t){let{data:n}=await a.Z.put("".concat(r,"/api/agents/").concat(e),t);return n}async function P(e,t){let{data:n}=await a.Z.get("".concat(r,"/api/agents/").concat(e,"/runs").concat("number"==typeof t?"?limit=".concat(t):""));return n}async function F(e,t){let{data:n}=await a.Z.post("".concat(r,"/api/agents/").concat(e,"/runs"),t);return n}async function J(e,t,n){let{data:s}=await a.Z.put("".concat(r,"/api/agents/").concat(e,"/runs/").concat(t),n);return s}async function U(e,t){let{data:n}=await a.Z.get("".concat(r,"/api/agents/").concat(e,"/runs/").concat(t));return n}async function V(e){let{data:t}=await a.Z.post("".concat(r,"/api/llm/product_from_image"),e);return t}async function K(e){let{data:t}=await a.Z.post("".concat(r,"/api/gemini/variant_set"),e);return t}async function B(){let{data:e}=await a.Z.get("".concat(r,"/api/prompts"));return e}async function H(e){let{data:t}=await a.Z.post("".concat(r,"/api/prompts"),e);return t}async function W(e,t){let n=[];e&&n.push("date_preset=".concat(encodeURIComponent(e))),t&&n.push("ad_account=".concat(encodeURIComponent(t)));let s=n.length?"?".concat(n.join("&")):"",{data:i}=await a.Z.get("".concat(r,"/api/meta/campaigns").concat(s));return i}async function G(e){var t,n;let i={...e,store:null!==(t=e.store)&&void 0!==t?t:s(),include_closed:null===(n=e.include_closed)||void 0===n||n,date_field:e.date_field},{data:o}=await a.Z.post("".concat(r,"/api/shopify/orders_count_by_title"),i);return o}async function Y(e){var t;let n={...e,store:null!==(t=e.store)&&void 0!==t?t:s()},{data:i}=await a.Z.post("".concat(r,"/api/shopify/products_brief"),n);return i}async function Q(e){var t,n;let i={...e,store:null!==(t=e.store)&&void 0!==t?t:s(),include_closed:null===(n=e.include_closed)||void 0===n||n,aggregate:e.aggregate,date_field:e.date_field},{data:o}=await a.Z.post("".concat(r,"/api/shopify/orders_count_by_collection"),i);return o}},2468:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2140:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]])},7164:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},3907:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},8184:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},function(e){e.O(0,[472,776,971,23,744],function(){return e(e.s=2828)}),_N_E=e.O()}]);