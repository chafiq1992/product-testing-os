(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{7363:function(t,e,n){Promise.resolve().then(n.bind(n,2817)),Promise.resolve().then(n.bind(n,912)),Promise.resolve().then(n.bind(n,1481))},2817:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return f}});var a=n(7437),i=n(551),r=n.n(i),o=n(7138),c=n(2757),s=n(6463),u=n(2265),l=n(6264);let d=r()(()=>Promise.all([n.e(776),n.e(527)]).then(n.bind(n,9527)),{loadableGenerated:{webpack:()=>[9527]},ssr:!1}),p=r()(()=>n.e(148).then(n.bind(n,8148)),{loadableGenerated:{webpack:()=>[8148]},ssr:!1});function f(){let t=String((0,s.useSearchParams)().get("id")||""),[e,n]=(0,u.useState)({id:t,name:t}),[i,r]=(0,u.useState)([]),[f,g]=(0,u.useState)(""),[m,y]=(0,u.useState)(null),_=(0,u.useMemo)(()=>"agent_".concat(t,"_instruction"),[t]);return(0,u.useEffect)(()=>{(async()=>{if(t){try{let e=await (0,l.e1)(t);n(e)}catch(t){}try{let e=await (0,l.HW)(t,20);r((null==e?void 0:e.data)||[])}catch(t){}}})()},[t]),(0,u.useEffect)(()=>{(async()=>{if(t&&f)try{let e=await (0,l.kY)(t,f);y(e)}catch(t){}})()},[t,f]),(0,a.jsxs)("div",{className:"min-h-screen w-full bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-sky-50 via-white to-indigo-50 text-slate-800",children:[(0,a.jsxs)("header",{className:"h-16 px-5 md:px-8 flex items-center justify-between border-b bg-white/70 backdrop-blur sticky top-0 z-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h1",{className:"font-semibold text-xl tracking-tight",children:(null==e?void 0:e.name)||"Agent"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("select",{className:"px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white",value:f,onChange:t=>g(t.target.value),children:[(0,a.jsx)("option",{value:"",children:"History"}),i.map(t=>(0,a.jsx)("option",{value:t.id,children:t.title||t.id},t.id))]})}),(0,a.jsx)(o.default,{href:"/agents",className:"rounded-xl font-semibold inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white",children:"Agents"}),(0,a.jsx)(o.default,{href:"/agents/angles",className:"rounded-xl font-semibold inline-flex items-center gap-2 px-4 py-2 border border-slate-200 bg-white text-slate-900 hover:bg-slate-50",children:"Angles"})]})]}),(0,a.jsxs)("div",{className:"p-6 md:p-8",children:["promotion-agent"===t?(0,a.jsx)(p,{instructionKey:_,initialInstruction:null==e?void 0:e.instruction,agentId:t}):(0,a.jsx)(d,{defaultEndpoint:"/api/chatkit/run"}),m?(0,a.jsxs)("div",{className:"mt-6 rounded-xl border border-slate-200 bg-white shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Previous Run"}),(0,a.jsxs)("div",{className:"text-xs text-slate-500 mb-3",children:[(null==m?void 0:m.title)||(null==m?void 0:m.id)," â€” ",null==m?void 0:m.status]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Input"}),(0,a.jsx)("pre",{className:"text-xs bg-slate-50 p-3 border rounded-lg overflow-auto max-h-64",children:JSON.stringify((null==m?void 0:m.input)||{},null,2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Output"}),(0,a.jsx)("pre",{className:"text-xs bg-slate-50 p-3 border rounded-lg overflow-auto max-h-64",children:JSON.stringify((null==m?void 0:m.output)||{},null,2)})]})]})]}):null]})]})}},6264:function(t,e,n){"use strict";n.d(e,{$8:function(){return Q},DO:function(){return u},HW:function(){return D},HX:function(){return v},JA:function(){return U},KQ:function(){return Z},Ks:function(){return L},LJ:function(){return O},ME:function(){return d},Nm:function(){return z},PN:function(){return y},Q:function(){return T},Rd:function(){return p},Sv:function(){return S},V0:function(){return X},VI:function(){return j},WM:function(){return h},XD:function(){return l},_R:function(){return K},_X:function(){return G},aW:function(){return W},dP:function(){return w},e1:function(){return J},eg:function(){return x},ew:function(){return Y},fE:function(){return f},fh:function(){return k},hw:function(){return _},jZ:function(){return E},kY:function(){return B},l9:function(){return g},n4:function(){return s},oB:function(){return M},rU:function(){return H},sF:function(){return I},sP:function(){return A},sQ:function(){return R},sj:function(){return b},sm:function(){return N},th:function(){return P},vz:function(){return F},xY:function(){return o},yD:function(){return c},yp:function(){return m},zO:function(){return C}});var a=n(8472);let i=n(357).env.NEXT_PUBLIC_API_BASE_URL||"";function r(){try{return localStorage.getItem("ptos_store")||void 0}catch(t){return}}async function o(t){let e=new FormData;for(let n of(e.append("audience",t.audience),e.append("benefits",JSON.stringify(t.benefits)),e.append("pain_points",JSON.stringify(t.pain_points)),null!=t.base_price&&e.append("base_price",String(t.base_price)),t.title&&e.append("title",t.title),Array.isArray(t.sizes)&&e.append("sizes",JSON.stringify(t.sizes)),Array.isArray(t.colors)&&e.append("colors",JSON.stringify(t.colors)),t.targeting&&e.append("targeting","string"==typeof t.targeting?t.targeting:JSON.stringify(t.targeting)),"boolean"==typeof t.advantage_plus&&e.append("advantage_plus",String(t.advantage_plus)),"number"==typeof t.adset_budget&&e.append("adset_budget",String(t.adset_budget)),t.model&&e.append("model",t.model),t.angles_prompt&&e.append("angles_prompt",t.angles_prompt),t.title_desc_prompt&&e.append("title_desc_prompt",t.title_desc_prompt),t.landing_copy_prompt&&e.append("landing_copy_prompt",t.landing_copy_prompt),t.images||[]))e.append("images",n);let{data:n}=await a.Z.post("".concat(i,"/api/tests"),e,{headers:{"Content-Type":"multipart/form-data"}});return n}async function c(t){let{data:e}=await a.Z.get("".concat(i,"/api/tests/").concat(t));return e}async function s(t){let{data:e}=await a.Z.get("".concat(i,"/api/tests/").concat(t,"?slim=1"));return e}async function u(t){var e,n;let o={...t,settings:{...t.settings||{},store:null!==(n=null==t?void 0:null===(e=t.settings)||void 0===e?void 0:e.store)&&void 0!==n?n:r()}},{data:c}=await a.Z.post("".concat(i,"/api/flows/draft"),o);return c}async function l(t,e){var n,o;let c={...e,settings:{...e.settings||{},store:null!==(o=null==e?void 0:null===(n=e.settings)||void 0===n?void 0:n.store)&&void 0!==o?o:r()}},{data:s}=await a.Z.put("".concat(i,"/api/flows/draft/").concat(t),c);return s}async function d(t){let{data:e}=await a.Z.get("".concat(i,"/api/flows/").concat(t));return e}async function p(t,e){let n=[];"number"==typeof t&&n.push("limit=".concat(t));let o=e||r();o&&n.push("store=".concat(encodeURIComponent(o)));let c=n.length?"?".concat(n.join("&")):"",{data:s}=await a.Z.get("".concat(i,"/api/flows").concat(c));return s}async function f(t){let{data:e}=await a.Z.delete("".concat(i,"/api/flows/").concat(t));return e}async function g(){let{data:t}=await a.Z.get("".concat(i,"/api/meta/audiences"));return t}async function m(t){let{data:e}=await a.Z.post("".concat(i,"/api/flows/ads/launch"),t);return e}async function y(t){let{data:e}=await a.Z.post("".concat(i,"/api/llm/angles"),t);return e}async function _(t){let{data:e}=await a.Z.post("".concat(i,"/api/llm/title_desc"),t);return e}async function h(t){let{data:e}=await a.Z.post("".concat(i,"/api/llm/landing_copy"),t);return e}async function v(t){let{data:e}=await a.Z.post("".concat(i,"/api/llm/analyze_landing_page"),t);return e}async function w(t){let{data:e}=await a.Z.post("".concat(i,"/api/meta/draft_image_campaign"),t);return e}async function b(t){let{data:e}=await a.Z.post("".concat(i,"/api/meta/draft_carousel_campaign"),t);return e}async function x(t){let e=new FormData;for(let n of t||[])e.append("files",n);let{data:n}=await a.Z.post("".concat(i,"/api/uploads"),e,{headers:{"Content-Type":"multipart/form-data"}});return n}async function j(t){let{data:e}=await a.Z.post("".concat(i,"/api/shopify/upload_images"),{...t,store:r()});return e}async function Z(t){let{data:e}=await a.Z.post("".concat(i,"/api/shopify/product_create_from_title_desc"),{...t,store:r()});return e}async function N(t){let{data:e}=await a.Z.post("".concat(i,"/api/shopify/update_title"),{...t,store:r()});return e}async function S(t){var e,n;let{data:o}=await a.Z.post("".concat(i,"/api/shopify/create_page_from_copy"),{...t,store:r()});return{page_url:null!==(n=null!==(e=null==o?void 0:o.page_url)&&void 0!==e?e:null==o?void 0:o.url)&&void 0!==n?n:void 0}}async function P(t){let{data:e}=await a.Z.post("".concat(i,"/api/shopify/configure_variants"),{...t,store:r()});return e}async function O(t){let e=new FormData;e.append("product_gid",t.product_gid),t.title&&e.append("title",t.title),t.description&&e.append("description",t.description),t.landing_copy&&e.append("landing_copy",JSON.stringify(t.landing_copy));let n=r();for(let a of(n&&e.append("store",n),t.files||[]))e.append("files",a);let{data:o}=await a.Z.post("".concat(i,"/api/shopify/upload_files"),e,{headers:{"Content-Type":"multipart/form-data"}});return o}async function k(t){var e;let n={...t,store:null!==(e=t.store)&&void 0!==e?e:r()},{data:o}=await a.Z.post("".concat(i,"/api/shopify/collection_products"),n);return o}async function C(t){let e=[],n=null!=t?t:r();n&&e.push("store=".concat(encodeURIComponent(n)));let o=e.length?"?".concat(e.join("&")):"",{data:c}=await a.Z.get("".concat(i,"/api/campaign_mappings").concat(o));return c}async function R(t){var e;let n={...t,store:null!==(e=t.store)&&void 0!==e?e:r()},{data:o}=await a.Z.post("".concat(i,"/api/campaign_mappings"),n);return o}async function M(t){let{data:e}=await a.Z.post("".concat(i,"/api/gemini/ad_image"),t);return e}async function I(t){let{data:e}=await a.Z.post("".concat(i,"/api/gemini/feature_benefit_set"),t);return e}async function E(t){let{data:e}=await a.Z.post("".concat(i,"/api/agent/execute"),t);return e}async function z(t){let{data:e}=await a.Z.post("".concat(i,"/api/translate"),t);return e}async function A(t){let{data:e}=await a.Z.get("".concat(i,"/api/agents").concat("number"==typeof t?"?limit=".concat(t):""));return e}async function J(t){let{data:e}=await a.Z.get("".concat(i,"/api/agents/").concat(t));return e}async function U(t,e){let{data:n}=await a.Z.put("".concat(i,"/api/agents/").concat(t),e);return n}async function D(t,e){let{data:n}=await a.Z.get("".concat(i,"/api/agents/").concat(t,"/runs").concat("number"==typeof e?"?limit=".concat(e):""));return n}async function L(t,e){let{data:n}=await a.Z.post("".concat(i,"/api/agents/").concat(t,"/runs"),e);return n}async function T(t,e,n){let{data:r}=await a.Z.put("".concat(i,"/api/agents/").concat(t,"/runs/").concat(e),n);return r}async function B(t,e){let{data:n}=await a.Z.get("".concat(i,"/api/agents/").concat(t,"/runs/").concat(e));return n}async function F(t){let{data:e}=await a.Z.post("".concat(i,"/api/llm/product_from_image"),t);return e}async function H(t){let{data:e}=await a.Z.post("".concat(i,"/api/gemini/variant_set"),t);return e}async function W(){let{data:t}=await a.Z.get("".concat(i,"/api/prompts"));return t}async function X(t){let{data:e}=await a.Z.post("".concat(i,"/api/prompts"),t);return e}async function G(t,e){let n=[];t&&n.push("date_preset=".concat(encodeURIComponent(t))),e&&n.push("ad_account=".concat(encodeURIComponent(e)));let r=n.length?"?".concat(n.join("&")):"",{data:o}=await a.Z.get("".concat(i,"/api/meta/campaigns").concat(r));return o}async function K(t){var e,n;let o={...t,store:null!==(e=t.store)&&void 0!==e?e:r(),include_closed:null===(n=t.include_closed)||void 0===n||n,date_field:t.date_field},{data:c}=await a.Z.post("".concat(i,"/api/shopify/orders_count_by_title"),o);return c}async function Q(t){var e;let n={...t,store:null!==(e=t.store)&&void 0!==e?e:r()},{data:o}=await a.Z.post("".concat(i,"/api/shopify/products_brief"),n);return o}async function Y(t){var e,n;let o={...t,store:null!==(e=t.store)&&void 0!==e?e:r(),include_closed:null===(n=t.include_closed)||void 0===n||n,aggregate:t.aggregate,date_field:t.date_field},{data:c}=await a.Z.post("".concat(i,"/api/shopify/orders_count_by_collection"),o);return c}},2757:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n(8030).Z)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]])},7138:function(t,e,n){"use strict";n.d(e,{default:function(){return i.a}});var a=n(231),i=n.n(a)},6463:function(t,e,n){"use strict";var a=n(1169);n.o(a,"useRouter")&&n.d(e,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(e,{useSearchParams:function(){return a.useSearchParams}})},551:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});let a=n(9920);n(7437),n(2265);let i=a._(n(148));function r(t,e){var n;let a={loading:t=>{let{error:e,isLoading:n,pastDelay:a}=t;return null}};"function"==typeof t&&(a.loader=t);let r={...a,...e};return(0,i.default)({...r,modules:null==(n=r.loadableGenerated)?void 0:n.modules})}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},912:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let a=n(5592);function i(t){let{reason:e,children:n}=t;if("undefined"==typeof window)throw new a.BailoutToCSRError(e);return n}},148:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return u}});let a=n(7437),i=n(2265),r=n(912),o=n(1481);function c(t){return{default:t&&"default"in t?t.default:t}}let s={loader:()=>Promise.resolve(c(()=>null)),loading:null,ssr:!0},u=function(t){let e={...s,...t},n=(0,i.lazy)(()=>e.loader().then(c)),u=e.loading;function l(t){let c=u?(0,a.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,s=e.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(o.PreloadCss,{moduleIds:e.modules}):null,(0,a.jsx)(n,{...t})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...t})});return(0,a.jsx)(i.Suspense,{fallback:c,children:s})}return l.displayName="LoadableComponent",l}},1481:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"PreloadCss",{enumerable:!0,get:function(){return r}});let a=n(7437),i=n(8512);function r(t){let{moduleIds:e}=t;if("undefined"!=typeof window)return null;let n=(0,i.getExpectedRequestStore)("next/dynamic css"),r=[];if(n.reactLoadableManifest&&e){let t=n.reactLoadableManifest;for(let n of e){if(!t[n])continue;let e=t[n].files.filter(t=>t.endsWith(".css"));r.push(...e)}}return 0===r.length?null:(0,a.jsx)(a.Fragment,{children:r.map(t=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(t),as:"style"},t))})}}},function(t){t.O(0,[472,231,971,23,744],function(){return t(t.s=7363)}),_N_E=t.O()}]);