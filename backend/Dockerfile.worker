FROM python:3.11-slim
ENV PYTHONDONTWRITEBYTECODE=1     PYTHONUNBUFFERED=1     PORT=8080

WORKDIR /app
COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

COPY backend/app /app/app
COPY backend/worker_entrypoint.sh /app/worker_entrypoint.sh
RUN chmod +x /app/worker_entrypoint.sh

EXPOSE 8080
CMD ["/app/worker_entrypoint.sh"]
